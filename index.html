<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CSV Data Analysis Agent</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header class="app-header">
  <h1>CSV Analysis Agent</h1>
  <div class="header-actions">
    <button id="settings-btn" class="btn">Settings</button>
    <button id="hide-assistant-btn" class="btn">Hide Assistant</button>
  </div>
</header>

<div class="main-layout" id="main-layout">
  <main class="content-area">
    <h2>Main Panel</h2>
    <p>This is the main content area.</p>
  </main>

  <div
    class="resizer"
    id="resizer"
    role="separator"
    aria-label="Resize assistant panel"
    aria-orientation="vertical"
    tabindex="0">
  </div>

  <aside class="assistant-sidebar" id="assistant-sidebar">
    <div class="message-list" id="message-list">
      <!-- Messages will be dynamically inserted here -->
    </div>
    <div class="assistant-thinking-panel">
      <div class="timeline" id="timeline">
        <h4>Thinking Log</h4>
        <ul id="thinking-log-list"></ul>
      </div>
      <div class="tool-plan" id="tool-plan">
        <h4>Next Step</h4>
        <p id="tool-plan-content">
          <span id="tool-plan-text">No next step determined.</span>
          <span id="tool-plan-spinner" class="inline-spinner" aria-hidden="true"></span>
        </p>
      </div>
    </div>
    <div class="chat-input-area">
      <textarea id="chat-input" placeholder="Ask a question about your data..."></textarea>
      <button id="send-btn">Send</button>
    </div>
  </aside>
</div>


</body>

<!-- Settings Modal -->
<div id="settings-modal" class="modal" style="display: none;">
  <div class="modal-content">
    <span class="close-btn">&times;</span>
    <h2>Provider Settings</h2>
    
    <div class="form-group">
      <label for="provider-select">LLM Provider</label>
      <select id="provider-select">
        <option value="gemini" selected>Gemini</option>
      </select>
    </div>

    <div class="form-group">
      <label for="api-key-input">API Key</label>
      <input type="password" id="api-key-input" placeholder="Enter your API key...">
    </div>

    <div class="form-group">
      <label for="model-input">Model</label>
      <input list="models" id="model-input" name="model-input" value="gemini-pro">
      <datalist id="models">
        <option value="gemini-pro">
        <option value="gemini-1.5-pro-latest">
      </datalist>
    </div>

    <div class="form-group switch-container">
      <label for="use-local-key-switch">Use Local Key</label>
      <label class="switch">
        <input type="checkbox" id="use-local-key-switch" checked>
        <span class="slider round"></span>
      </label>
    </div>
    
    <div class="modal-footer">
      <button id="test-connection-btn" class="btn">Test Connection</button>
      <button id="save-settings-btn" class="btn primary">Save</button>
    </div>
  </div>
</div>

<script src="script.js"></script>

</html>
